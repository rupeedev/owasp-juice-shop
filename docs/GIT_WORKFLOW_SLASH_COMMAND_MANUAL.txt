GIT WORKFLOW SLASH COMMAND MANUAL

TL;DR
-----
Universal Claude Code slash command providing git workflow guidance for all
project types (web, IaC, mobile, APIs). Covers branching, security checks,
commits, and pushing with conventional commit standards.

Location: ~/.claude/commands/git-workflow.md
Usage: Type /git-workflow in Claude Code → specify your git task


BASIC USAGE

1. Navigate to your project: cd /path/to/project
2. Invoke command: /git-workflow
3. Tell Claude what you need: "Create feature branch for authentication"
4. Claude guides you through the secure workflow


QUICK EXAMPLES

EXAMPLE 1: Web App Feature
cd ~/my-react-app && /git-workflow
User: "Add JWT authentication to login"
Claude: Creates feature/jwt-auth → security check → commits → pushes

EXAMPLE 2: IaC Changes (Terraform)
cd ~/terraform-infra && /git-workflow
User: "Update VPC configuration"
Claude: Creates infra/vpc-update → validates terraform → commits → pushes


WORKFLOW PHASES

PHASE 1: Branch Management
Creates appropriately named branch:
  feature/*  - New features
  bugfix/*   - Bug fixes
  hotfix/*   - Critical production fixes
  infra/*    - Infrastructure changes (IaC)
  config/*   - Configuration updates
  docs/*     - Documentation
  test/*     - Test additions
  refactor/* - Code refactoring

PHASE 2: Security Pre-Commit Check
Scans for:
  - API keys, passwords, tokens, credentials
  - .env files, *.pem, *.key, credentials.json
  - Terraform state files (.tfstate, .tfstate.backup)
  - Hardcoded secrets in code

Never Commit:
  .env, credentials.json, *.pem, *.key, terraform.tfstate, kubeconfig

Solutions:
  AWS: Secrets Manager, Parameter Store, KMS
  Azure: Key Vault | GCP: Secret Manager | HashiCorp: Vault

PHASE 3: Git Commit (Conventional Commits)
Format: <type>(<scope>): <subject>

Types:
  feat     - New feature
  fix      - Bug fix
  docs     - Documentation
  refactor - Code refactoring
  test     - Tests
  chore    - Maintenance
  ci       - CI/CD changes
  perf     - Performance

Examples:
  feat(auth): add JWT token validation
  fix(api): resolve null pointer in user service
  feat(terraform): add VPC module for multi-az deployment
  fix(k8s): correct resource limits in deployment
  docs(readme): update installation instructions

PHASE 4: Git Push
Safety Checks:
  - Never force push to main/master/production
  - Verify remote configuration
  - Check for upstream changes
  - Validate no state files (IaC projects)

Commands:
  git push -u origin <branch>  - First push (sets tracking)
  git push                     - Regular push
  git push --force-with-lease  - Safe force push (when needed)


PROJECT TYPE GUIDANCE

IaC Projects (Terraform/CloudFormation/K8s)
Pre-commit:
  terraform validate | terraform fmt -check
  tfsec | checkov | terrascan
  yamllint (for K8s) | cfn-lint (for CloudFormation)

Exclude: .tfstate, .tfstate.backup, *.tfvars with secrets
Best practices: Remote state, version lock, test non-prod first

Web/Mobile Applications
Pre-commit: Linters, formatters, tests, build check
Best practices: Cross-browser/device testing, bundle size review

APIs/Microservices
Pre-commit: Test endpoints, update docs, check breaking changes
Best practices: Version APIs, update changelog, test dependencies


COMPLETE WORKFLOW (8 STEPS)

1. Navigate    → cd /path/to/project
2. Invoke      → /git-workflow
3. Branch      → Claude creates appropriate branch
4. Changes     → Edit files
5. Security    → Scan for secrets/vulnerabilities
6. Stage       → git add <files>
7. Commit      → Conventional commit message
8. Push        → git push with safety checks


BEST PRACTICES

✓ Work on feature branches, never main/master | Pull before push
✓ Commit often with meaningful messages | Run tests before pushing
✓ Never commit secrets | Keep commits atomic | Delete merged branches
✓ IaC: Validate (terraform/yamllint) | Security scans (tfsec/checkov)
✓ IaC: Remote state backends | Never commit .tfstate | Test non-prod first
✓ Security: Scan for secrets | Use .gitignore | Secrets management services
✓ Security: Rotate leaked credentials | Branch protection | Code reviews


TROUBLESHOOTING

Command doesn't work → Verify ~/.claude/commands/git-workflow.md | Restart Claude

Push rejected → git pull --rebase origin main | Resolve conflicts | Push

Secrets committed (before push) → git reset --soft HEAD~1 | Remove | Commit again
Secrets committed (after push) → Rotate credentials | git-filter-repo | Notify team

Wrong message (before push) → git commit --amend -m "new message"

Merge conflicts → git status | Resolve manually | git add <files> | git rebase --continue


ADVANCED TIPS

• Check CLAUDE.md, CONTRIBUTING.md | Use pre-commit hooks | commitlint
• Git aliases | CI/CD integration | GPG signed commits for critical repos


REFERENCES

Conventional Commits:  https://www.conventionalcommits.org/
Terraform Security:    https://github.com/aquasecurity/tfsec
Pre-Commit Framework:  https://pre-commit.com/
Git Hooks:             https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks

---
Version: 1.0 | Location: ~/.claude/commands/git-workflow.md | Scope: Global
